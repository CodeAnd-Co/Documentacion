---
title: "RF13: Super Administrador Lee Cliente"
sidebar_position: 15
---

# RF13: Super Administrador Lee Cliente

---

## Historia de Usuario

Como administrador, quiero visualizar la información detallada de un cliente específico, para verificar que los datos están correctamente asignados.

## **Criterios de Aceptación:**

1. El Super Administrador debe poder visualizar la información detallada de un cliente desde un modal.
2. Los datos mostrados deben incluir:
   - Título con el nombre del cliente
   - ID de Cliente
   - Nombre Legal
   - Nombre Visible
   - Cantidad de usuarios asignados
   - Cantidad de empleados
   - Imagen de previsualización del cliente
3. El modal debe ser de solo lectura, sin permitir la edición directa de los datos.
4. Debe existir una opción para cerrar o cancelar la vista (ej. botón "CANCELAR").

---

## **Diagrama de Secuencia**

> _Descripción_: El diagrama de secuencia ilustra el flujo de interacción entre el Super Administrador y el sistema cuando se solicita la información detallada de un cliente. Incluye la solicitud desde la interfaz, el procesamiento por parte del backend, la consulta a la base de datos, la respuesta con los datos del cliente y su posterior visualización en la interfaz.

```mermaid
sequenceDiagram
participant SuperAdmin as Super Administrador
participant Frontend
participant Api_gateway
participant Backend
participant rutaClientes
participant controladorClientes
participant repositorioClientes
participant Database

SuperAdmin -->> Frontend: Hace clic en un cliente de la lista
Frontend -->> Api_gateway: POST /api/clientes/consultar-cliente con JWT
Api_gateway -->> Backend: Reenvía POST /api/clientes/consultar-cliente con JWT
Backend -->> rutaClientes: Llama a la ruta /api/clientes/consultar-cliente
rutaClientes -->> rutaClientes: Valida API key

alt API key inválida
    rutaClientes -->> Backend: Retorna JSON {"message": "API key inválida"}, status 400
    Backend -->> Api_gateway: Retorna JSON {"message": "API key inválida"}, status 400
    Api_gateway -->> Frontend: Retorna JSON {"message": "Error de autenticación"}, status 400
    Frontend -->> SuperAdmin: Muestra mensaje de error: "Acceso no autorizado"
else API key válida
    rutaClientes -->> rutaClientes: Valida JWT

    alt JWT inválido o expirado
        rutaClientes -->> Backend: Retorna JSON {"message": "No autorizado"}, status 401
        Backend -->> Api_gateway: Retorna JSON {"message": "No autorizado"}, status 401
        Api_gateway -->> Frontend: Retorna JSON {"message": "No autorizado"}, status 401
        Frontend -->> SuperAdmin: Muestra mensaje de error "No autorizado"
    else JWT válido
        rutaClientes -->> controladorClientes: Solicita cliente por ID
        controladorClientes -->> repositorioClientes: Busca cliente por ID
        repositorioClientes -->> Database: Consulta por ID

        alt Error al obtener los datos
            Database -->> repositorioClientes: Retorna error (RequestTimeout, ResourceNotFoundException)
            repositorioClientes -->> controladorClientes: Retorna error
            controladorClientes -->> rutaClientes: Retorna error
            rutaClientes -->> Backend: Retorna 500 {"message": "Error al obtener datos"}
            Backend -->> Api_gateway: Retorna 500 {"message": "Error al obtener datos"}
            Api_gateway -->> Frontend: Retorna 500 {"message": "Error al obtener datos"}
            Frontend -->> SuperAdmin: Muestra mensaje "Error al cargar la información del cliente."
        else Cliente encontrado
            Database -->> repositorioClientes: Retorna datos del cliente
            repositorioClientes -->> controladorClientes: Retorna datos del cliente
            controladorClientes -->> rutaClientes: Retorna datos del cliente
            rutaClientes -->> Backend: JSON con la información del cliente, status 200
            Backend -->> Api_gateway: JSON con la información del cliente, status 200
            Api_gateway -->> Frontend: JSON con la información del cliente, status 200
            Frontend -->> SuperAdmin: Muestra modal con información del cliente
        end
    end
end
```
---

## **Mockup**

> _Descripción_: El mockup muestra la interfaz donde el Super Administrador puede visualizar la información detallada de un cliente.

> ![Interfaz de leer cliente](imagenes/mockupLeerCliente.png)

## **Pruebas Unitarias**

_<u>[Enlace a pruebas RF13 Leer Cliente ](https://docs.google.com/spreadsheets/d/1NLGwGrGA5PVOEzLaqxa8Ts1D_Ng3QzzqNKWJYUzxD-M/edit?usp=sharing)</u>_

### Historial de cambios

| **Tipo de Versión** | **Descripción**                                 | **Fecha** | **Colaborador**               |
| ------------------- | ----------------------------------------------- | --------- | ----------------------------- |
| **1.0**             | Creación del documento.                          | 06/3/2025 | Angélica Rios Cuentas         |
| **1.1**             | Actualización de la documentación del requisito. | 08/4/2025 | Paola María Garrido Montes    |