---
title: "RF26: Registrar la alimentación de la charola"  
sidebar_position: 27
---

# RF26: Registrar la alimentación de la charola

**Última actualización:** 20 de marzo de 2025

### Historia de Usuario
Como usuario, quiero registrar la alimentación que se le da a una charola, incluyendo el tipo de alimento e hidratación proporcionada, para llevar un control detallado de la nutrición y el bienestar de las larvas y escarabajos.

  **Criterios de Aceptación:**
  - El sistema debe permitir ingresar el tipo y cantidad de alimento e hidratación proporcionada.
  - La información ingresada debe actualizarse en el historial de la charola.
  - Solo los usuarios autorizados deben poder registrar alimentación.


---

### Diagrama de Secuencia

> *Descripción*: El diagrama de secuencia muestra cómo los usuarios pueden ingresar un nuevo tipo de alimento.

```mermaid
sequenceDiagram
    actor Usuario 
    participant View as View
    participant ViewModel as ViewModel
    participant Domain as Domain
    participant Repository as Repository
    participant APIService as API Service (MVVM)
    participant Controller as Controller
    participant Model as Model
    participant Database as Base de Datos

    alt POST: Inserción de alimentación exitoso
        Usuario->>View: Presiona icono " + "
        activate View

        View->>ViewModel: registrarAlimento(nombre, descripcion)
        deactivate View
        activate ViewModel

        ViewModel->>Domain: registrarAlimento(nombre, descripcion)
        deactivate ViewModel
        activate Domain

        Domain->>Repository: registrarAlimento(nombre, descripcion)
        deactivate Domain
        activate Repository

        Repository->>APIService: registrarAlimento(nombre, descripcion)
        deactivate Repository
        activate APIService

        APIService->>Controller: Procesar solicitud
        deactivate APIService
        activate Controller

        Controller->>Model: Ingresar el dato en la tabla
        deactivate Controller
        activate Model

        Model->>Database: INSERT INTO COMIDA(nombre, descripcion) VALUES ('nombre','descripcion')   
        deactivate Model
        activate Database

        Database-->>Model: Confirma información
        deactivate Database
        activate Model

        Model-->>Controller: Éxito
        deactivate Model
        activate Controller

        Controller-->>APIService: 200 OK
        deactivate Controller
        activate APIService

        APIService-->>Repository: Inserción del alimento exitoso
        deactivate APIService
        activate Repository

        Repository-->>Domain: Inserción del alimento exitoso
        deactivate Repository
        activate Domain

        Domain-->>ViewModel: Notifica éxito
        deactivate Domain
        activate ViewModel

        ViewModel-->>View: Actualizar UI
        deactivate ViewModel
        activate View

        View-->>Usuario: Mostrar interfaz de Alimentación
        deactivate View
    else POST: Sin conexión a internet, 503
        Usuario->>View: Presiona icono " + "
        activate View

        View->>ViewModel: registrarAlimento(nombre, descripcion)
        deactivate View
        activate ViewModel

        ViewModel->>Domain: registrarAlimento(nombre, descripcion)
        deactivate ViewModel
        activate Domain

        Domain->>Repository: registrarAlimento(nombre, descripcion)
        deactivate Domain
        activate Repository

        Repository->>APIService: registrarAlimento(nombre, descripcion)
        deactivate Repository
        activate APIService

        APIService-->>Repository: Error 503
        deactivate APIService
        activate Repository

        Repository-->>Domain: Error 503
        deactivate Repository
        activate Domain

        Domain-->>ViewModel: Notifica error
        deactivate Domain
        activate ViewModel

        ViewModel-->>View: Actualizar UI
        deactivate ViewModel
        activate View

        View-->>Usuario: Mostrar mensaje "Sin conexión a internet"
        deactivate View
        
    else POST: Error conexión con la base de datos, 503
        Usuario->>View: Presiona icono " + "
        activate View

        View->>ViewModel: registrarAlimento(nombre, descripcion)
        deactivate View
        activate ViewModel

        ViewModel->>Domain: registrarAlimento(nombre, descripcion)
        deactivate ViewModel
        activate Domain

        Domain->>Repository: registrarAlimento(nombre, descripcion)
        deactivate Domain
        activate Repository

        Repository->>APIService: registrarAlimento(nombre, descripcion)
        deactivate Repository
        activate APIService

        APIService->>Controller: Procesar solicitud
        deactivate APIService
        activate Controller

        Controller->>Model: Ingresar el dato en la tabla
        deactivate Controller
        activate Model

        Model-->>Controller: Error con la conexión a base de datos
        deactivate Model
        activate Controller

        Controller-->>APIService: Error 503
        deactivate Controller
        activate APIService

        APIService-->>Repository: Error 503
        deactivate APIService
        activate Repository

        Repository-->>Domain: Error 503
        deactivate Repository
        activate Domain

        Domain-->>ViewModel: Notifica Error
        deactivate Domain
        activate ViewModel

        ViewModel-->>View: Actualizar UI
        deactivate ViewModel
        activate View

        View-->>Usuario: Mostrar mensaje "Base de datos no disponible "
        deactivate View

        else POST: Datos no válidos, 400
        Usuario->>View: Presiona icono " + "
        activate View

        View->>ViewModel: registrarAlimento(nombre, descripcion)
        deactivate View
        activate ViewModel

        ViewModel->>Domain: registrarAlimento(nombre, descripcion)
        deactivate ViewModel
        activate Domain

        Domain->>Repository: registrarAlimento(nombre, descripcion)
        deactivate Domain
        activate Repository

        Repository->>APIService: registrarAlimento(nombre, descripcion)
        deactivate Repository
        activate APIService

        APIService->>Controller: Procesar solicitud
        deactivate APIService
        activate Controller

        Controller->>Model: Ingresar el dato en la tabla
        deactivate Controller
        activate Model

        Model->>Database: INSERT INTO COMIDA(nombre, descripcion) VALUES ('nombre','descripcion')
        deactivate Model
        activate Database

        Database-->>Model: Dato no válido
        deactivate Database
        activate Model

        Model-->>Controller: Error
        deactivate Model
        activate Controller

        Controller-->>APIService: Error 400
        deactivate Controller
        activate APIService

        APIService-->>Repository: Error 400
        deactivate APIService
        activate Repository

        Repository-->>Domain: Error 400
        deactivate Repository
        activate Domain

        Domain-->>ViewModel: Notifica Error
        deactivate Domain
        activate ViewModel

        ViewModel-->>View: Actualizar UI
        deactivate ViewModel
        activate View

        View-->>Usuario: Mostrar mensaje "Datos no válidos"
        deactivate View
    end

```
---

### Mockup

> *Descripción*: El mockup muestra la interfaz donde el Super Administrador o Cliente pueden ver los grupos de productos y los productos dentro de cada grupo.



### Pruebas Unitarias 
| ID Prueba  | Descripción                                               | Resultado Esperado  |
|------------|-----------------------------------------------------------|---------------------|
| PU-RF26-01 | Registrar alimentación de una charola con datos válidos.  | El sistema guarda correctamente la información y confirma el registro. |
| PU-RF26-02 | Verificar que la información ingresada se actualiza en el historial de la charola. | El sistema refleja los cambios en el historial sin necesidad de recarga. |
| PU-RF26-03 | Intentar registrar alimentación sin especificar tipo o cantidad. | El sistema muestra un mensaje de error indicando que los datos son obligatorios. |
| PU-RF26-04 | Validar que los registros de alimentación sean accesibles en consultas futuras. | La información almacenada puede ser consultada posteriormente sin inconsistencias. |
| PU-RF26-05 | Evaluar el tiempo de respuesta al registrar múltiples entradas de alimentación. | El sistema procesa correctamente la operación sin afectar el rendimiento. |
