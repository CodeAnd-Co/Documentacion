---
title: "RF70: Usuario carga fórmula."  
sidebar_position: 70
---

# RF70: Usuario carga formula.

**Última actualización:** 25 de marzo de 2025

### Historia de Usuario

Yo como usuario quiero cargar una formula guardada para ser más rápido al generar mis gráficas y reportes.

  **Precondiciones:**
  - Debe haber una fórmula guardada en base de datos.
  - El tipo de dato de la fórmula es un string.
  - Debe haber 

  **Criterios de Aceptación:**
  - El backend desacoplado se conecta a la base de datos.
  - Se obtiene un string de la base de datos.
  - La fórmula se selecciona desde un menú desplegable.
  
---

### Diagrama de Secuencia

```mermaid
sequenceDiagram
    actor Usuario
    participant view as Vista
    participant route as Ruta
    participant controller as Controlador
    participant usecase as CasoCargarFormula
    participant repository as FormulaRepositorio
    participant model as FormulaModelo
    participant backend as Backend

    Usuario->>route: Cargar Formula
    activate route
    route->>controller: cargarFormula()
    deactivate route
    activate controller
    controller-)usecase: cargarFormula()
    activate usecase
    usecase-)repository: cargarFormula()
    activate repository
    repository-)model: cargarFormula()
    activate model 
    model-)backend: cargarFormula()
    activate backend
    alt Caso exitoso
    rect Lightgreen
    backend--)model: response(formulaCargada)
    model--)repository: response(formulaCargada)
    repository--)usecase: response(formulaCargada)
    usecase--)controller: reponse(formulaCargada)
    controller--)view: response(formulaCargada)
    activate view
    view->>Usuario: Render
    deactivate view
    end
    else Error al cargar formula
    rect Pink
    backend--)model: response(error)
    deactivate backend
    model--)repository: response(error)
    deactivate model
    repository--)usecase: response(error)
    deactivate repository
    usecase--)controller: reponse(error)
    deactivate usecase
    controller--)view: response(error)
    deactivate controller
    activate view
    view->>Usuario: Render
    deactivate view
    end
    end
    
```





```mermaid
sequenceDiagram
    actor Backend
    participant view as Vista
    participant route as Ruta
    participant controller as Controlador
    participant repository as FormulaRepositorio
    participant model as FormulaModelo
    participant db as Database

    Backend->>route: Cargar Formula
    activate route
    route->>controller: cargarFormula()
    deactivate route
    activate controller
    controller-)repository: cargarFormula()
    activate repository
    repository-)model: cargarFormula()
    activate model 
    model->>db: query
    activate db
    alt Caso exitoso
    rect Lightgreen
    db --) model: response(formulas)
    model--)repository: response(formulas)
    repository--)controller: response(formulas)
    controller--)view: response(formulas)
    activate view
    view--)Backend: response(formulas)
    deactivate view
    end
    else Error al cargar formula
    rect Pink
    db--)model: response(error)
    deactivate db
    model--)repository: response(error)
    deactivate model
    repository--)controller: response(error)
    deactivate repository
    controller--)view: response(error)
    deactivate controller
    activate view
    view--)Backend: response(error)
    deactivate view
    end
    end
    
```

---

### Mockup

![Mockup]

> *Descripción*: El mockup representa la interfaz del sistema donde el usuario puede cerrar sesión. Muestra los campos requeridos y los botones de acción disponibles.

---

### Pruebas Unitarias 
| ID Prueba | Descripción | Resultado Esperado |
|-----------|-------------|--------------------|
|PU-RF70-01|  |  |