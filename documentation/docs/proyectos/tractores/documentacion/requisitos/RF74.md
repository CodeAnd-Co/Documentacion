---
title: "RF74: Usuario aplica fórmula."  
sidebar_position: 75
---

# RF74: Usuario aplica fórmula

**Última actualización:** 27 de marzo de 2025

### Historia de Usuario

Yo como usuario quiero poder aplicar las fórmulas que previamente fueron definidas para poder filtrar los datos que usaré en la generación de reportes.

  **Criterios de Aceptación:**
  - El sistema debe permitir seleccionar una fórmula previamente guardada.
  - El sistema debe aplicar la fórmula sobre los datos seleccionados.
  - El usuario debe poder ver el resultado aplicado en una tabla o gráfica.
  - Si la fórmula tiene un error de sintaxis o usa datos no disponibles, el sistema debe notificarlo visualmente.
---

### Diagrama de Secuencia

![Diagrama de Secuencia] 

> *Descripción*: El diagrama de secuencia muestra cómo el usuario interactúa con el sistema para visualizar la página de incio de sesión, detallando los pasos de solicitud de datos, validación y confirmación.

```mermaid
sequenceDiagram
    actor Usuario
    participant view as Vista
    participant route as Ruta
    participant controller as Controlador
    participant usecase as CasoAplicarFormula
    participant repository as Repositorio
    participant calc as MotorCalculo

    Usuario->>route: Aplicar Fórmula
    activate route
    route->>controller: aplicarFormula()
    deactivate route
    activate controller
    controller->>usecase: procesarFormula(formula, datosSeleccionados)
    activate usecase
    usecase->>repository: obtenerDatosYAplicarFormula()
    activate repository
    repository->>calc: aplicarFormula(formula, datosSeleccionados)
    activate calc
    alt Fórmula válida
        calc-->>repository: resultado(formulaAplicada)
    else Error en fórmula
        calc-->>repository: error("Sintaxis inválida o datos no disponibles")
    end
    deactivate calc
    repository-->>usecase: respuesta(resultado o error)
    deactivate repository
    usecase-->>controller: respuesta(resultado o error)
    deactivate usecase
    controller-->>view: respuesta(resultado o error)
    deactivate controller
    view->>Usuario: Renderizar resultado o mensaje de error

```


---

### Mockup

![Mockup]

> *Descripción*: El mockup representa la interfaz del sistema donde el usuario puede consultar la página de inicio de sesión. 

---

### Pruebas Unitarias 
| ID Prueba | Descripción | Resultado Esperado |
|-----------|-------------|--------------------|
|PU-RF74-01|Pendiente | Pendiente|
|PU-RF74-02|Pendiente | Pendiente|

---

### Registro de cambios

| Autor | Descripción del cambio | Versión |
|---------|-------------------------|---------|
| Rommel Toledo Crespo | Definición y Criterios de Aceptación | 1.0 |